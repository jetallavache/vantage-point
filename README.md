# Vantage Point

Панель администратора на React для управления контентом.

## Реализованный функционал

### Минимум

- JWT аутентификация с сохранением токена и рефреш-токена в куках
- Обновление токена с помощью рефреш-токена при истечении времени жизни токена
- Список постов с постраничной навигацией (информация для постранички возвращается в заголовках ответа на запрос списка постов)
- Защищенные маршруты
- Redux с saga для управления состоянием
- Строгая типизация TypeScript
- Lazy loading компонентов
- Расширенная обработка ошибок

### Максимум

- Добавление поста
- Редактирование поста
- Удаление поста
- Список/добавление/редактирование/удаление авторов
- Список/добавление/редактирование/удаление тегов
- Адаптивный дизайн для мобильных устройств
- Формы с валидацией Zod
- Обработка файлов (аватары, изображения постов)

## Стек технологий

- **React 18** - функциональные компоненты, hooks
- **TypeScript** - строгая типизация
- **Vite** - быстрая сборка и разработка
- **Redux Toolkit** - управление состоянием
- **Redux-Saga** - side effects
- **Redux Dynamic Modules** - ленивая загрузка
- **React Router DOM** - маршрутизация
- **Ant Design** - UI компоненты
- **Zod** - валидация форм

## Структура проекта

```
src/
├── features/           # Модули по функциональности
│   ├── auth/          # Аутентификация
│   │   ├── api/       # API запросы
│   │   ├── model/     # Redux (actions, reducer, saga, selectors)
│   │   ├── ui/        # Компоненты
│   │   └── validation/ # Zod схемы
│   ├── posts/         # Управление постами
│   ├── authors/       # Управление авторами
│   └── tags/          # Управление тегами
├── shared/            # Общие компоненты и утилиты
│   ├── api/           # HTTP клиент, обработка ошибок
│   ├── store/         # Конфигурация Redux
│   └── ui/            # Переиспользуемые компоненты
└── __tests__/         # Тесты
```

## REST API

Документация: https://rest-test.machineheads.ru/documentation/

## Установка и запуск

```bash
# Установка зависимостей (рекомендуется pnpm)
pnpm install
# или
npm install

# Запуск в режиме разработки
pnpm dev
# или
npm run dev

# Сборка для продакшена
pnpm build
# или
npm run build

# Предварительный просмотр сборки
pnpm preview
# или
npm run preview

# Форматирование кода
pnpm format
# или
npm run format
```

Приложение будет доступно по адресу: http://localhost:3000

## Деплой

Проект автоматически деплоится через GitHub Actions. После каждого коммита в main ветку запускается workflow, который собирает и тестирует приложение, после чего оно становится доступным по адресу: https://jetallavache.github.io/vantage-point

## Переменные окружения

Создайте файл `.env` в корне проекта:

```env
VITE_BASE_API_URL=https://rest-test.machineheads.ru
```

## Тестирование

```bash
# Запуск всех тестов
pnpm test:run
# или
npm run test:run

# Запуск тестов в watch режиме
pnpm test
# или
npm test

# Запуск тестов с покрытием
pnpm test:coverage
# или
npm run test:coverage
```

## Особенности архитектуры

- **Feature-based структура** - каждая функциональность изолирована в отдельном модуле
- **Lazy loading** - модули загружаются только при необходимости
- **Dynamic Redux modules** - reducer и saga подключаются динамически
- **Строгая типизация** - TypeScript везде, включая Redux
- **Обработка ошибок** - централизованная обработка API ошибок
- **JWT с refresh** - автоматическое обновление токенов
- **Адаптивный дизайн** - корректное отображение на мобильных устройствах
- **Vite** - быстрая сборка и запуск проекта для разработки
